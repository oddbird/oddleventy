{% import 'post.macros.njk' as post %}
{% import 'oss.macros.njk' as oss %}
{% import 'layout.macros.njk' as layout %}

{% if index %}
  {% set list = collections[index] %}
  {{ post.by_year(
    list | removePage(page.url) if list else none,
    collections
  ) }}
{% elif bird and (bird != 'oddbird') %}
  {{ oss.list(
    collections.oss | byBird(bird),
    collections
  ) }}
  {{ post.by_year(
    collections._post | byBird(bird),
    collections
  ) }}
{% elif events %}
  {{ layout.title('Events') }}
  <ol reversed>
    {% for event in events -%}
      <li>
        {% if event | isFuture %}
          <strong>Upcoming!</strong>
        {% endif %}
        [{{ event.date | getDate('iso') }}]
        {{ utility.link_if(event.venue, event.url) }}{% if event.adr %} {{ '--' | typogr | safe }}
        {{ event.adr }}{% endif %}
      </li>
    {% endfor %}
  </ol>
{% endif %}
