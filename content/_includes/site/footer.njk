{% import 'contact.macros.njk' as contact %}
{% import 'utility.macros.njk' as utility %}

{%- set add_cta = page.url | addCallToAction -%}
{%- set footer_title -%}
  ### Let's chat about your web project
{%- endset -%}
{%- set footer_content -%}
    Fill out the form,
    [schedule a call](https://calendly.com/oddbird/discovery),
    send us an [email](mailto:birds@oddbird.net),
    or find us on [Twitter](https://twitter.com/oddbird) or [GitHub](https://github.com/oddbird)
{%- endset -%}


{%- if add_cta %}
  {% include 'site/cta.njk' %}
{% endif -%}

<div data-layout="footer">
  {% if page.url != '/contact/' %}
    <aside aria-label="contact">
      {%- if not add_cta %}
        <div class="contact-form-intro">
          {{ footer_title | md | safe }}
          {{ footer_content | md | safe }}
        </div>
      {% endif -%}
      {{ contact.form(name='contact-footer') }}
    </aside>
  {% endif %}

  <footer role="contentinfo">
    <div class="colophon">
      {% set colophon = collections.all | findPage('data.info_slug', 'colophon') %}
      {{ colophon.templateContent | safe }}
    </div>

    <div class="legal">
      {% set info = collections.all | findPage('data.info_slug', 'legal') %}
      {{ info.templateContent | safe }}
    </div>
  </footer>
</div>
